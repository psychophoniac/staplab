function logFunc(call){
	if( execname() == "stapio" || pid() != target() || ppfunc() == "tracesys") {
		return 0
	}
	else {
		if( call == 1) {
			printf("-> %s\n", ppfunc())
		}
		else {
			printf("<- %s\n", ppfunc())
		}
	}
}

probe syscall.*.call {
	logFunc(1)
}

probe syscall.*.return {
	logFunc(0)
}

# non-DWARF syscall probes
# used when you dont have the debuginfo-package installed
#probe nd_syscall.*.call {
#	logFunc(execname(), ppfunc(), pid(), target(), 1)
#}

#probe nd_syscall.*.return {
#	logFunc(execname(), ppfunc(), pid(), target(), 0)
#}
